import{useEffect as t,useState as e,useRef as n,useCallback as o,createElement as i}from"react";var r,u={exports:{}};
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/r=u,function(){var t={}.hasOwnProperty;function e(){for(var n=[],o=0;o<arguments.length;o++){var i=arguments[o];if(i){var r=typeof i;if("string"===r||"number"===r)n.push(i);else if(Array.isArray(i)){if(i.length){var u=e.apply(null,i);u&&n.push(u)}}else if("object"===r){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){n.push(i.toString());continue}for(var l in i)t.call(i,l)&&i[l]&&n.push(l)}}}return n.join(" ")}r.exports?(e.default=e,r.exports=e):window.classNames=e}();var l=u.exports;function a(t,e,n){var o,i;i=n,(o=e).bottom>i.top&&o.top<=i.top&&o.y-o.height>0&&(t.style.top="unset",t.style.bottom=c(t,"bottom")+n.top-e.bottom+"px")}function c(t,e){const n=getComputedStyle(t)[e],o=Number(n.split("px")[0]);return n?o:0}function s(t,e,n,o){return e&&e!==t&&!e.classList.contains(o)&&(!n||!n.map((t=>t.contains(e))).filter((t=>t)).length)&&!t.contains(e)}function m(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;const o=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=o.left+n,u=o.right-n,l=o.top+n,a=o.bottom-n;return r<i.right&&r>i.left||u>i.left&&u<i.right||l<i.bottom&&l>i.top||a>i.top&&a<i.bottom}function g(t,e,n){const o=getComputedStyle(n);if("none"===o.display)return!1;if(o.visibility&&"visible"!==o.visibility)return!1;if(o.opacity&&Number(o.opacity)<.1)return!1;const i=n.getBoundingClientRect();if(0===Math.round(n.offsetWidth+n.offsetHeight+i.height+i.width))return!1;const r={x:Math.round(i.left+n.offsetWidth/2),y:Math.round(i.top+n.offsetHeight/2)};if(!r.x||!r.y)return!1;if(r.x<0)return!1;if(r.x>(t.documentElement.clientWidth||e.document.documentElement.clientWidth))return!1;if(r.y<0)return!1;if(r.y>(t.documentElement.clientHeight||e.document.documentElement.clientHeight))return!1;let u=t.elementFromPoint(r.x,r.y);if(u)do{if(u===n)return!0;u=u.parentElement}while(u.parentElement);return!1}const d=r=>{var u;const{languageList:a,trigger:d}=r,[f,h]=e(!1),v=n(null);r.preview||function(e,n){t((()=>{var t,o;const i=t=>{e.current&&!e.current.contains(t.target)&&n()};return null===(t=e.current)||void 0===t||t.ownerDocument.addEventListener("mousedown",i),null===(o=e.current)||void 0===o||o.ownerDocument.addEventListener("touchstart",i),()=>{var t,n;null===(t=e.current)||void 0===t||t.ownerDocument.removeEventListener("mousedown",i),null===(n=e.current)||void 0===n||n.ownerDocument.removeEventListener("touchstart",i)}}),[e,n])}(v,(()=>h(!1)));const y=o((t=>{t.preventDefault(),t.stopPropagation(),h((t=>!t))}),[h]),w="hover"===d?{onMouseEnter:y,onMouseLeave:y}:{},x="click"===d?{onClick:y}:{};return t((()=>{var t;const e=null===(t=v.current)||void 0===t?void 0:t.querySelector(".popupmenu-menu");e&&(e.style.display=f?"flex":"none",f&&function(t,e){const n=t.ownerDocument,o=n.defaultView;let i=t.getBoundingClientRect();(function(t,e){return e.x<0||e.y<0||e.x+e.width>t.document.documentElement.clientWidth||e.y+e.height>t.document.documentElement.clientHeight})(o,i)&&function(t,e,n){if(n.x<0){const t=Math.round(c(e,"left")-n.x);e.style.left=t+"px",n.x+=t}if(n.y<0){const t=Math.round(c(e,"top")-n.y);e.style.top=t+"px",n.y+=t}if(n.x+n.width>t.document.documentElement.clientWidth){const o=Math.round(c(e,"right")+(n.x+n.width-t.document.documentElement.clientWidth));e.style.right=o+"px",n.x-=o}if(n.y+n.height>t.document.documentElement.clientHeight){const o=Math.round(c(e,"bottom")+(n.y+n.height-t.document.documentElement.clientHeight));e.style.top="unset",e.style.bottom=o+"px",n.y-=o}}(o,t,i);i=t.getBoundingClientRect();const r=function(t,e,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=[];const u=Math.round(n.left+o),l=Math.round(n.right-o),a=Math.round(n.top+o),c=Math.round(n.bottom-o),m=t.elementFromPoint(u,a),g=t.elementFromPoint(l,a),d=t.elementFromPoint(u,c),p=t.elementFromPoint(l,c);return i&&(i=i.replace(/\./g,""),r=[...t.querySelectorAll(".".concat(i))]),s(e,m,r,i)?m:s(e,g,r,i)?g:s(e,d,r,i)?d:!!s(e,p,r,i)&&p}(n,t,i,3,"popupmenu");if(r&&g(n,o,r))p(t,i,r.getBoundingClientRect(),e);else if(r){let u=r;do{if(m(t,u,3)&&g(n,o,u))return p(t,i,u.getBoundingClientRect(),e);if(!u.parentElement)break;u=u.parentElement}while(u.parentElement)}}(e,r.position))}),[r.position,f]),i("div",{ref:v,className:l(r.className,"widget-language-selector","popupmenu"),...w},i("div",{className:"popupmenu-trigger popupmenu-trigger-alignment",...x},i("span",{className:"current-language-text"},(null===(u=r.currentLanguage)||void 0===u?void 0:u.value)||""),i("span",{className:"language-arrow","aria-hidden":"true"},i("div",{className:"arrow-image ".concat(f?"arrow-up":"arrow-down")}))),i("div",{className:l("popupmenu-menu","popupmenu-position-".concat(r.position))},a.map((t=>{var e;return i("div",{key:t._guid,className:"popupmenu-basic-item ".concat(t._guid===(null===(e=r.currentLanguage)||void 0===e?void 0:e._guid)?"active":""),onClick:()=>{if(r.onSelect)return r.onSelect(t)}},t.value)}))))};function p(t,e,n,o){switch(o){case"left":!function(t,e,n){var o,i;i=n,(o=e).left<i.right&&o.right>=i.right&&o.left>=i.left&&(t.style.left=c(t,"left")+n.right-e.left+"px")}(t,e,n),a(t,e,n);break;case"right":!function(t,e,n){var o,i;i=n,(o=e).right>i.left&&o.left<=i.left&&o.right<=i.right&&(t.style.right=c(t,"right")+n.left-e.right+"px")}(t,e,n),a(t,e,n);break;case"top":!function(t,e,n){o=t.ownerDocument.defaultView,i=e,r=n,i.top<r.bottom&&i.bottom>=r.bottom&&i.y+i.height<o.document.documentElement.clientHeight&&(t.style.top=c(t,"top")+n.bottom-e.top+"px");var o,i,r}(t,e,n);break;case"bottom":a(t,e,n)}}function f(n){const[r,u]=e(),[l,a]=e([]),[c,s]=e(!1);t((()=>{if(n.languageOptions.items&&n.languageCaption){const t=n.languageOptions.items.map((t=>({_guid:t.id,value:n.languageCaption.get(t).value})));a(t),t.length<2&&n.hideForSingle&&s(!0)}}),[n]),t((()=>{const t=window.mx.session.getUserObject().jsonData.attributes["System.User_Language"].value,e=l.find((e=>e._guid===t));u(e)}),[l]);const m=o((t=>{const e=window.mx.session.getUserObject();e.addReference("System.User_Language",t._guid),window.mx.data.commit({mxobj:e,callback(){u(t),window.mx.reloadWithState()}})}),[]);return c?null:i(d,{className:n.class,position:n.position,currentLanguage:r,languageList:l,onSelect:m,trigger:n.trigger,preview:!1})}export{f as default};
