define(["react"],(function(t){"use strict";var e,n={exports:{}};
/*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  */e=n,function(){var t={}.hasOwnProperty;function n(){for(var e=[],o=0;o<arguments.length;o++){var i=arguments[o];if(i){var r=typeof i;if("string"===r||"number"===r)e.push(i);else if(Array.isArray(i)){if(i.length){var u=n.apply(null,i);u&&e.push(u)}}else if("object"===r){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){e.push(i.toString());continue}for(var l in i)t.call(i,l)&&i[l]&&e.push(l)}}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n}();var o=n.exports;function i(t,e,n){var o,i;i=n,(o=e).bottom>i.top&&o.top<=i.top&&o.y-o.height>0&&(t.style.top="unset",t.style.bottom=r(t,"bottom")+n.top-e.bottom+"px")}function r(t,e){const n=getComputedStyle(t)[e],o=Number(n.split("px")[0]);return n?o:0}function u(t,e,n,o){return e&&e!==t&&!e.classList.contains(o)&&(!n||!n.map((t=>t.contains(e))).filter((t=>t)).length)&&!t.contains(e)}function l(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;const o=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=o.left+n,u=o.right-n,l=o.top+n,a=o.bottom-n;return r<i.right&&r>i.left||u>i.left&&u<i.right||l<i.bottom&&l>i.top||a>i.top&&a<i.bottom}function a(t,e,n){const o=getComputedStyle(n);if("none"===o.display)return!1;if(o.visibility&&"visible"!==o.visibility)return!1;if(o.opacity&&Number(o.opacity)<.1)return!1;const i=n.getBoundingClientRect();if(0===Math.round(n.offsetWidth+n.offsetHeight+i.height+i.width))return!1;const r={x:Math.round(i.left+n.offsetWidth/2),y:Math.round(i.top+n.offsetHeight/2)};if(!r.x||!r.y)return!1;if(r.x<0)return!1;if(r.x>(t.documentElement.clientWidth||e.document.documentElement.clientWidth))return!1;if(r.y<0)return!1;if(r.y>(t.documentElement.clientHeight||e.document.documentElement.clientHeight))return!1;let u=t.elementFromPoint(r.x,r.y);if(u)do{if(u===n)return!0;u=u.parentElement}while(u.parentElement);return!1}const c=e=>{var n;const{languageList:i,trigger:c}=e,[m,g]=t.useState(!1),d=t.useRef(null);e.preview||function(e,n){t.useEffect((()=>{var t,o;const i=t=>{e.current&&!e.current.contains(t.target)&&n()};return null===(t=e.current)||void 0===t||t.ownerDocument.addEventListener("mousedown",i),null===(o=e.current)||void 0===o||o.ownerDocument.addEventListener("touchstart",i),()=>{var t,n;null===(t=e.current)||void 0===t||t.ownerDocument.removeEventListener("mousedown",i),null===(n=e.current)||void 0===n||n.ownerDocument.removeEventListener("touchstart",i)}}),[e,n])}(d,(()=>g(!1)));const p=t.useCallback((t=>{t.preventDefault(),t.stopPropagation(),g((t=>!t))}),[g]),f="hover"===c?{onMouseEnter:p,onMouseLeave:p}:{},h="click"===c?{onClick:p}:{};return t.useEffect((()=>{var t;const n=null===(t=d.current)||void 0===t?void 0:t.querySelector(".popupmenu-menu");n&&(n.style.display=m?"flex":"none",m&&function(t,e){const n=t.ownerDocument,o=n.defaultView;let i=t.getBoundingClientRect();(function(t,e){return e.x<0||e.y<0||e.x+e.width>t.document.documentElement.clientWidth||e.y+e.height>t.document.documentElement.clientHeight})(o,i)&&function(t,e,n){if(n.x<0){const t=Math.round(r(e,"left")-n.x);e.style.left=t+"px",n.x+=t}if(n.y<0){const t=Math.round(r(e,"top")-n.y);e.style.top=t+"px",n.y+=t}if(n.x+n.width>t.document.documentElement.clientWidth){const o=Math.round(r(e,"right")+(n.x+n.width-t.document.documentElement.clientWidth));e.style.right=o+"px",n.x-=o}if(n.y+n.height>t.document.documentElement.clientHeight){const o=Math.round(r(e,"bottom")+(n.y+n.height-t.document.documentElement.clientHeight));e.style.top="unset",e.style.bottom=o+"px",n.y-=o}}(o,t,i);i=t.getBoundingClientRect();const c=function(t,e,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=[];const l=Math.round(n.left+o),a=Math.round(n.right-o),c=Math.round(n.top+o),s=Math.round(n.bottom-o),m=t.elementFromPoint(l,c),g=t.elementFromPoint(a,c),d=t.elementFromPoint(l,s),p=t.elementFromPoint(a,s);return i&&(i=i.replace(/\./g,""),r=[...t.querySelectorAll(".".concat(i))]),u(e,m,r,i)?m:u(e,g,r,i)?g:u(e,d,r,i)?d:!!u(e,p,r,i)&&p}(n,t,i,3,"popupmenu");if(c&&a(n,o,c))s(t,i,c.getBoundingClientRect(),e);else if(c){let r=c;do{if(l(t,r,3)&&a(n,o,r))return s(t,i,r.getBoundingClientRect(),e);if(!r.parentElement)break;r=r.parentElement}while(r.parentElement)}}(n,e.position))}),[e.position,m]),t.createElement("div",{ref:d,className:o(e.className,"widget-language-selector","popupmenu"),...f},t.createElement("div",{className:"popupmenu-trigger popupmenu-trigger-alignment",...h},t.createElement("span",{className:"current-language-text"},(null===(n=e.currentLanguage)||void 0===n?void 0:n.value)||""),t.createElement("span",{className:"language-arrow","aria-hidden":"true"},t.createElement("div",{className:"arrow-image ".concat(m?"arrow-up":"arrow-down")}))),t.createElement("div",{className:o("popupmenu-menu","popupmenu-position-".concat(e.position))},i.map((n=>{var o;return t.createElement("div",{key:n._guid,className:"popupmenu-basic-item ".concat(n._guid===(null===(o=e.currentLanguage)||void 0===o?void 0:o._guid)?"active":""),onClick:()=>{if(e.onSelect)return e.onSelect(n)}},n.value)}))))};function s(t,e,n,o){switch(o){case"left":!function(t,e,n){var o,i;i=n,(o=e).left<i.right&&o.right>=i.right&&o.left>=i.left&&(t.style.left=r(t,"left")+n.right-e.left+"px")}(t,e,n),i(t,e,n);break;case"right":!function(t,e,n){var o,i;i=n,(o=e).right>i.left&&o.left<=i.left&&o.right<=i.right&&(t.style.right=r(t,"right")+n.left-e.right+"px")}(t,e,n),i(t,e,n);break;case"top":!function(t,e,n){o=t.ownerDocument.defaultView,i=e,u=n,i.top<u.bottom&&i.bottom>=u.bottom&&i.y+i.height<o.document.documentElement.clientHeight&&(t.style.top=r(t,"top")+n.bottom-e.top+"px");var o,i,u}(t,e,n);break;case"bottom":i(t,e,n)}}return function(e){const[n,o]=t.useState(),[i,r]=t.useState([]),[u,l]=t.useState(!1);t.useEffect((()=>{if(e.languageOptions.items&&e.languageCaption){const t=e.languageOptions.items.map((t=>({_guid:t.id,value:e.languageCaption.get(t).value})));r(t),t.length<2&&e.hideForSingle&&l(!0)}}),[e]),t.useEffect((()=>{const t=window.mx.session.getUserObject().jsonData.attributes["System.User_Language"].value,e=i.find((e=>e._guid===t));o(e)}),[i]);const a=t.useCallback((t=>{const e=window.mx.session.getUserObject();e.addReference("System.User_Language",t._guid),window.mx.data.commit({mxobj:e,callback(){o(t),window.mx.reloadWithState()}})}),[]);return u?null:t.createElement(c,{className:e.class,position:e.position,currentLanguage:n,languageList:i,onSelect:a,trigger:e.trigger,preview:!1})}}));
